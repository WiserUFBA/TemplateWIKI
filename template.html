<!DOCTYPE html>
<html>
<head>
    <!-- Created by Jeferson Lima -->
    <!-- Version 1.3 -->
    <!-- Media Wiki Style template for Foswiki -->
    <!-- Page Configs -->
    <title>Smart-UFBA: Web das Coisas para um campus universitário inteligente</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- Page Languages -->
    <meta name="language" content="English" />
    <meta name="language" content="Portuguese" />

    <!-- Copyright informations -->
    <link rel="copyright" href="//creativecommons.org/licenses/by-sa/3.0/" />

    <!-- Favicon configuration -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/apple-touch-icon-180x180.png" />
    <link rel="icon" type="image/png" href="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/android-chrome-192x192.png" sizes="192x192" />
    <link rel="icon" type="image/png" href="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/favicon-96x96.png" sizes="96x96" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="msapplication-TileImage" content="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/mstile-144x144. 
    png" />
    <meta name="theme-color" content="#ffffff" />
    
    <!-- Some description of this site -->
    <meta name="description" content="Wiki do projeto de pesquisa SmartUFBA que propõe o uso da Web das Coisas para um campus universitário inteligente" />
    <meta property="fb:admins" content="612066588876234" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:image" content="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/smartufbalogo.png" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/smartufbalogo.png" />

    <!-- IMPORTANT THING THAT NEED TO BE FIXED! -->
    <meta property="og:description" content="..."/>
    <meta name="twitter:title" content="..." />
    <meta name="twitter:description" content="..." />

    <!-- Style Configuration |!!CHANGE HREF BEFORE UPDATE!!| -->
    <link rel="stylesheet" type="text/css" href="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/style.css" />
    <!-- https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/style.css -->
    <style type="text/css">
        /* Foswiki classes */
        .foswikiHidden{
            display: none;
        }
        .content-firstheading a{
            color: black;
        }
        .indent-txt{
            white-space: pre-wrap;
        }
        /* Beautifull but not recomended :/ */
        a:hover, a:active, a:focus {
            outline: 0;
        }
    </style>
</head>
<body>
    <!-- Top -->
    <div id="top-transparency"></div>
    <div id="top-base"></div>
    <!-- Content Area -->
    <div class="content">
        <a id="top"></a>
        <!-- Used in some cases -->
        <div id="content-notice">
            <div id="content-central-notice"></div>
        </div>
        <div class="content-indicators"></div>
        <h1 id="content-firstheading"> %BASETOPIC% </h1>
        <div id="content-body">
            <div id="content-space"></div>
            <!-- Article will be placed here -->
            <article id="content-text"> %TEXT% </article>
            <div id="content-comment" class="hidden-class"> %COMMENT% </div>
            <div id="content-raw" class="indent-txt hidden-class">
                <div style="text-align:center;">
                    <img src="%SCRIPTURL{pub}%/%WEB%/ProjectLogo/preloading.gif" alt="Loading image" />
                </div>
            </div>
            <div class="printfooter">
                Retrieved from "<a href="https://wiki.dcc.ufba.br/%WEB%" dir="ltr"> https://wiki.dcc.ufba.br/%WEB%/ </a>"
            </div>
            <!-- Get the names of this topic -->
            <div id="content-links" class="content-links">
                <h4> Referências </h4>
            </div>
            <div style="clear:both"></div>
        </div>
    </div>
    <!-- Menu -->
    <div id="base-navigation">
        <h2> Navigation menu </h2>
        <div id="navigation-head">
            <div id="translate-buttons" role="navigation">
                <ul>
                    <li class="translate-icon" alt="Translate Menu"></li>
                    <li><a href="/%WEB%/%TOPIC%En" class="flag-en"> English </a></li>
                    <li><a href="/%WEB%/%TOPIC%" class="flag-pt"> Portuguese </a></li>
                </ul>
            </div>
            <div id="head-left">
                <div class="head-tabs">
                    <ul>
                        <li id="button-topic" class="selected">
                            <span>
                                <a accesskey="a" title="Ver o conteudo deste tópico [Alt+Shift+a]" href="#1">Tópico</a>
                            </span>
                        </li>
                        <li id="button-discuss">
                            <span>
                                <a accesskey="d" title="Discursões deste tópico [Alt+Shift+d]" href="#2">Discursões</a>
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
            <div id="head-right">
                <div class="head-tabs">
                    <!-- Need a javascript or some css trick -->
                    <ul>
                        <li id="button-raw">
                            <span>
                                <a accesskey="r" title="Ver o código fonte deste tópico [Alt+Shift+r]" href="#3"> Código-Fonte </a>
                            </span>
                        </li>
                    </ul>
                </div>
                <div id="head-search" role="search">
                    <form id="search-form" name="WebSearchForm" action="/%WEB%/WebSearch">
                        <div id="simple-search">
                            <input id="searchInput" type="text" accesskey="p" title="Procure na wiki [Alt+Shift+p]" placeholder="Search" name="search" tabindex="1" autocomplete="off" />
                            <input class="hidden-class" value="all" name="scope" />
                            <input class="hidden-class" value="search" name="tab" />
                            <input id="searchButton" class="searchButton" type="submit" title="Procure por um tópico com este nome" value="Go" name="go" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div id="navigation-panel">
            <div id="panel-logo" role="banner">
                <a class="banner" title="Visite a página principal" href="/%WEB%/"></a>
            </div>
            <!-- Every group of menu on this secction need to use the class "portal" and the role "navigation" -->
            <!-- <div id="..." class="portal" role="navigation"> -->
            <div id="main-portal" class="portal" name="main" role="navigation">
                <div class="body">
                    <ul>
                        <li><a href="/%WEB%/" title="Visite a página principal [Alt+Shift+z]">Página Principal</a></li>
                        <li><a href="/%WEB%/SobreProjeto"> Sobre o projeto </a></li>
                        <li><a href="/%WEB%/PublicacoesArtigos"> Publicações </a></li>
                        <li><a href="/%WEB%/NoticiasProjeto"> Notícias </a></li>
                        <li><a href="/%WEB%/NossoGrupo"> Grupo </a></li>
                    </ul>
                </div>       
            </div>
            <div id="area2-portal" class="portal" role="navigation">
            <h3> Nossos grupos </h3>
            </div>
            <div id="area2-portal" class="portal" role="navigation">
                <h3> Hardware </h3>
                <div class="body">
                    <ul>
                        <li><a href="/%WEB%/GrupoHardware.Tutoriais"> Tutoriais </a></li>
                        <li><a href="/%WEB%/GrupoHardware.Artigos"> Artigos </a></li>
                        <li><a href="/%WEB%/GrupoHardware.Projetos"> Projetos </a></li>
                        <li><a href="/%WEB%/GrupoHardware.Especificaoes"> Especificações </a></li>
                        <li><a href="/%WEB%/GrupoHardware.Todos"> Todos os Tópicos </a></li>
                        <li><a href="/%WEB%/GrupoHardware.Blog"> Diário de Bordo </a></li>
                    </ul>
                </div>       
            </div>
            <div id="area3-portal" class="portal" role="navigation">
                <h3> Software </h3>
                <div class="body">
                    <ul>
                        <li><a href="/%WEB%/GrupoSoftware.Tutoriais"> Tutoriais </a></li>
                        <li><a href="/%WEB%/GrupoSoftware.Artigos"> Artigos </a></li>
                        <li><a href="/%WEB%/GrupoSoftware.Projetos"> Projetos </a></li>
                        <li><a href="/%WEB%/GrupoSoftware.Especificaoes"> Especificações </a></li>
                        <li><a href="/%WEB%/GrupoSoftware.Todos"> Todos os Tópicos </a></li>
                        <li><a href="/%WEB%/GrupoSoftware.Blog"> Diário de Bordo </a></li>
                    </ul>
                </div>       
            </div>
            <div id="area4-portal" class="portal" role="navigation">
                <h3> Barramento </h3>
                <div class="body">
                    <ul>
                        <li><a href="/%WEB%/GrupoBarramento.Tutoriais"> Tutoriais </a></li>
                        <li><a href="/%WEB%/GrupoBarramento.Artigos"> Artigos </a></li>
                        <li><a href="/%WEB%/GrupoBarramento.Projetos"> Projetos </a></li>
                        <li><a href="/%WEB%/GrupoBarramento.Especificaoes"> Especificações </a></li>
                        <li><a href="/%WEB%/GrupoBarramento.Todos"> Todos os Tópicos </a></li>
                        <li><a href="/%WEB%/GrupoBarramento.Blog"> Diário de Bordo </a></li>
                    </ul>
                </div>       
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer id="footer">
        <ul id="footer-info">
            <li id="footer-whatis">
                O projeto de pesquisa SmartUFBA é um projeto que tem como foco proporcionar um campus universitário mais inteligente, através da Web das Coisas(WoT). Para isso iremos desenvolver uma infraestrutura web capaz de automatizar a publicação, descoberta, composição, utilização e compartilhamento de dispositivos através da Internet das Coisas(IoT).
            </li>
        </ul>
        <ul id="footer-config">
            <li> <a href="%SCRIPTURL{edit}%/%WEB%/%TOPIC%?t=%GMTIME{$epoch}%" accesskey="E"><strong>E</strong>ditar</a> </li>
            <li> <a href="%SCRIPTURL{attach}%/%WEB%/%TOPIC%?t=%GMTIME{$epoch}%" accesskey="A"><strong>A</strong>nexar</a> </li>
            <li> [[%SCRIPTURL{rdiff}%/%WEB%/%TOPIC%?t=%GMTIME{$epoch}%][Versões]] </li>
            <li> [[WebChanges][Modificações]] </li>
            <li> [[%NOTIFYTOPIC%][Aviso de Atualização]] </li>
            <li> [[WebPreferences][Preferências]] </li>
        </ul>
        <ul id="footer-icons">
            <li id="smart-ufba">
                <a href="https://github.com/WiserUFBA/SmartUFBA">
                    <img alt="SmartUFBA Project" src="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/smartufba-button.png" />
                </a>
            </li>
            <li id="smart-wiki-template">
                <a href="https://github.com/WiserUFBA/TemplateWIKI/">
                    <img alt="Foswiki template based on Media Wiki style" src="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/template-button.png" />
                </a>
            </li>
            <li id="wiser-ufba">
                <a href="http://wiser.dcc.ufba.br">
                    <img alt="Wiser Research Group" src="https://wiki.dcc.ufba.br/pub/SmartUFBA/ProjectLogo/wiser-button.png" />
                </a>
            </li>
        </ul>
        <div style="clear:both"></div>
    </footer>
    <!-- Page Script -->
    <script type="text/javascript">
        "use strict";
        /* Created by Jeferson Lima */
        /* Version 1.3 */
        // First Part
        var isReceivedRaw = false, actual_section = 1;
        var topic_url = "", topic_tag = "";
        if (document.getElementsByClassName("foswikiCurrentTopicLink").length > 0) {
            topic_url = document.getElementsByClassName("foswikiCurrentTopicLink")[0].href;
            topic_tag = topic_url.split("/")[topic_url.split("/").length - 1];
        }
        var external_links = document.getElementsByClassName("external-link");
        var links_list = "";

        // Hidden contents-link
        function hideContLinks(state) {
            document.getElementById("content-links").className = state ? "content-links hidden-class" : "content-links";
        }

        // Stack Overflow little trick
        function escapeRegExp(string) {
            return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
        }
        function replaceAll(string, find, replace) {
            return string.replace(new RegExp(escapeRegExp(find), "g"), replace);
        }

        // Hide a tag
        function hideTag(id, state) {
            var my_tag = document.getElementById(id);
            if ((my_tag.className.length > 0) && (my_tag.className != "hidden-class")) {
                if (state) my_tag.className += " hidden-class";
                else my_tag.className = replaceAll(my_tag.className, " hidden-class","");
            }
            else
                my_tag.className = state ? "hidden-class" : "";
        }
        // Change title and context topic
        function changeTitle(title) {
            hideTag("content-firstheading", (title.startsWith("Web")));
            document.getElementById("content-firstheading").innerHTML = title;
        }
        // Change the Selected status
        function changeSelectedButton(button_n) {
            var t1 = true, t2 = true, t3 = true;
            document.getElementById("button-topic").className = button_n == 1? "selected":"";
            document.getElementById("button-discuss").className = button_n == 2? "selected":"";
            document.getElementById("button-raw").className = button_n == 3? "selected":"";
            switch(button_n){
                case 1: t1 = false; break;
                case 2: t2 = false; break;
                case 3: t3 = false; break;
            }
            hideTag("content-text", t1);
            hideTag("content-comment", t2);
            hideTag("content-raw", t3);
            actual_section = button_n;
        }
        // Button Topic
        function changeSelectStatusTopic() {
            if (actual_section != 1) {
                changeSelectedButton(1);
                changeTitle(topic_tag);

                if (external_links.length > 0) hideContLinks(false);
            }
        }
        // Button Discuss
        function changeSelectStatusDiscuss() {
            if (actual_section != 2) {
                changeSelectedButton(2);
                changeTitle("Discursões");
                hideContLinks(true);
            }
        }
        // Button Raw 
        function changeSelectStatusViewRaw() {
            if (actual_section != 3) {
                changeSelectedButton(3);
                changeTitle("Código da página");
                hideContLinks(true);
                if (!isReceivedRaw) getRaw(topic_url);
            }
        }
        // Get the raw of the selected topic and put on the document
        function getRaw(url) {
            var xobj = new XMLHttpRequest();
            url += "?raw=on";

            xobj.open("GET", url, true);
            xobj.onreadystatechange = function () {
                if (xobj.readyState == 4 && xobj.status == "200") {
                    var html_received = new DOMParser();
                    html_received = html_received.parseFromString(xobj.responseText, "text/html");
                    
                    var html_saida = "<div class=\"raw-text\">" + html_received.getElementById("topic").innerHTML + "</div>";
                    if (actual_section == 3){
                        changeTitle("Código da página");
                    }
                    document.getElementById("content-raw").innerHTML = html_saida;
                }
            };
            xobj.send(null); 
        }
        // Correct the error on comments
        function correctComments() {
            var text_tag = document.getElementById("content-text");
            var comment_tag = document.getElementById("content-comment");
            var comment_pos = text_tag.innerHTML.search("<p></p>\n<p></p>");
            if (comment_pos != -1){
                var back_tag = comment_tag.innerHTML;
                comment_tag.innerHTML = text_tag.innerHTML.slice(comment_pos);
                comment_tag.innerHTML += back_tag;
                text_tag.innerHTML = text_tag.innerHTML.slice(0, comment_pos - 1);
            }
        }

        correctComments();
        document.getElementById("button-topic").onclick = changeSelectStatusTopic;
        document.getElementById("button-discuss").onclick = changeSelectStatusDiscuss;
        document.getElementById("button-raw").onclick = changeSelectStatusViewRaw;

        if (topic_tag.startsWith("Web")) {
            hideTag("content-firstheading", true);
        }

        if (external_links.length > 0) {
            var i;
            links_list = "<ul>";
            for (i = 0; i < external_links.length; i++) {
                links_list += "<li><div class=\"link-external\"><h4 class=\"link-name\"><a href=\"" + external_links[i].href + "\">" + external_links[i].innerHTML + "</a></h4><p class=\"link-description\">" + external_links[i].title + "</p></div></li>";
            }
            links_list += "</ul>";
            document.getElementById("content-links").innerHTML = "<h3> Referências </h3>" + links_list;
            hideContLinks(false);
        }
        else hideContLinks(true);

        if (topic_tag == "LayoutTemplate") {
            var iframe_display = document.createElement("iframe");
            var text_area = document.getElementById("content-text");
            var text_raw = text_area.innerHTML;
            text_area.innerHTML = "";
            text_area.appendChild(iframe_display);
            iframe_display.width = "100%";
            iframe_display.height = "400px"; // Need some js trick here
            if(iframe_display.contentDocument || iframe_display.contentWindow) {
                if (iframe_display.contentDocument){
                    iframe_display.contentDocument.open();
                    iframe_display.contentDocument.write(text_raw);
                    iframe_display.contentDocument.close();
                }
                else
                    iframe_display.contentWindow.document.innerHTML = text_raw;
                var idoc = iframe_display.contentDocument ? iframe_display.contentDocument: iframe_display.contentWindow.document;
                idoc.getElementById("content-text").innerHTML = "# TEXT #";
                idoc.getElementById("content-firstheading").innerHTML = "# BASETOPIC #";
            }
            else
                text_area.innerHTML = "ERROR!";
        }
        changeTitle(topic_tag);
    </script>
</body>
</html>